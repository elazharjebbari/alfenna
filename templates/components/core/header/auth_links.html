{% load static safe_url i18n %}
{% safe_url 'accounts:register' as register_url %}
{% safe_url 'accounts:login' as login_url %}

<ul class="header-auth-links list-unstyled d-flex align-items-center m-0">
  {% if request.user.is_authenticated %}
    <li class="me-2 small text-muted">{{ request.user.username }}</li>

    <li>
      <details class="user-menu" role="list" style="position:relative;">
        <summary class="btn p-0" aria-haspopup="listbox">
          <i class="fas fa-user-check text-success"></i>
        </summary>
        <ul class="menu shadow dropdown-menu-end" style="position:absolute; right:0; z-index:1000; list-style:none; margin:8px 0 0; padding:.25rem 0; min-width:12rem; background:#fff; border:1px solid #e5e5e5; border-radius:.5rem;">
          <li><hr class="dropdown-divider" style="margin:.25rem 0;"></li>
          <li class="px-1">
            <form method="post" action="{% url 'accounts:logout' %}">
              {% csrf_token %}
              <button type="submit" class="dropdown-item w-100 text-start" style="background:none;border:0;padding:.25rem .75rem;">
                <i class="fas fa-sign-out-alt me-1"></i> {% trans "Se dÃ©connecter" %}
              </button>
            </form>
          </li>
        </ul>
      </details>
    </li>
  {% else %}
    <li class="nav-item me-2">
      <a class="nav-link"
         href="{{ login_url }}?next={{ request.get_full_path|urlencode }}"
         data-bs-toggle="modal"
         data-bs-target="#loginModal">
        <i class="fas fa-sign-in-alt me-1"></i> {% trans "Se connecter" %}
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{{ register_url }}">
        {% trans "S'inscrire" %}
      </a>
    </li>
  {% endif %}
</ul>
