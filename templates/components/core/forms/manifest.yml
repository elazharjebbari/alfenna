alias: forms/shell
template: "components/core/forms/shell.html"

assets:
  head: []
  css:
    - "/static/components/forms/lead_step3.css"
  js:
    - "/static/js/flowforms.runtime.js"  # runtime fourni par le parent → unique dans la page
  vendors: []

params:
  display: "inline"
  title_html: null
  subtitle_html: null
  cta_label: null
  # Doc V3
  child: {}
  wizard_ctx: {}  # DEPRECATED

contract:
  optional:
    display: "str"
    title_html: "str"
    subtitle_html: "str"
    cta_label: "str"
    child:
      flow_key?: "str"
      config_json?: "str"
      backend_config?:
        endpoint_url?: "str"
        require_signed_token?: "bool"
        sign_url?: "str"
      ui_texts?: "dict"
    wizard_ctx:
      flow_key?: "str"
      config_json?: "str"

# === Compose (Étape 2) ===
compose:
  children:
    wizard:
      alias: "forms/wizard_generic"
      with:
        flow_key: "{{ flow_key }}"
        backend_config: "{{ backend_config }}"
        ui_texts: "{{ ui_texts }}"
        schema: "{{ schema }}"

hydrate:
  module: "apps.atelier.compose.hydrators.forms.hydrators"
  func: "forms_shell"

render:
  cacheable: false
