{% load i18n %}
{% with fullname_key=fields_map.fullname|default:'full_name' phone_key=fields_map.phone|default:'phone' address_key=fields_map.address|default:'address' product_key=fields_map.product|default:'product' promotion_key=fields_map.promotion|default:'promotion_selected' %}
<form class="needs-validation" data-form-stepper data-steps="2" action="{{ action_url }}" method="post" novalidate>
  {% csrf_token %}
  <div class="step-pane" data-step="1">
    <div class="mb-3">
      <label class="form-label" for="step2-name">{% trans "Nom complet" %}</label>
      <input type="text" class="form-control" id="step2-name" name="{{ fullname_key }}" autocomplete="name" required>
    </div>
    <div class="mb-3">
      <label class="form-label" for="step2-phone">{% trans "Numero de telephone" %}</label>
      <input type="tel" class="form-control" id="step2-phone" name="{{ phone_key }}" inputmode="tel" autocomplete="tel" minlength="6" maxlength="20" required>
      <div class="form-text">{% trans "WhatsApp accepte" %}</div>
    </div>
    <div class="d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-primary" data-next>{% trans "Continuer" %}</button>
    </div>
  </div>

  <div class="step-pane d-none" data-step="2">
    <div class="mb-3">
      <label class="form-label" for="step2-address">{% trans "Adresse complete" %}</label>
      <input type="text" class="form-control" id="step2-address" name="{{ address_key }}" autocomplete="street-address">
    </div>
    {% if product.id %}<input type="hidden" name="{{ product_key }}" value="{{ product.id }}">{% endif %}
    {% if pricing.promo_price %}<input type="hidden" name="{{ promotion_key }}" value="promo">{% endif %}
    <div class="d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-outline-secondary" data-prev>{% trans "Retour" %}</button>
      <button type="submit" class="btn btn-primary" data-submit>{% trans "Commander" %}</button>
    </div>
  </div>
</form>
{% endwith %}
