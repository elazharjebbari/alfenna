{# templates/components/core/accounts/register/form.html #}
{% load i18n %}
<section class="auth-wrap auth-slot" data-auth-screen>
  <header class="auth-header">
    <h1 class="auth-title">{{ title|default:_("Cr√©er mon compte") }}</h1>
    {% if subtitle %}<p class="auth-sub">{{ subtitle }}</p>{% endif %}
  </header>

  {% if messages %}
    <div class="auth-alerts" role="status" aria-live="polite">
      {% for message in messages %}
        <div class="alert {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="auth-card">
    {% if non_field_errors %}
      <div class="alert error" role="alert">{{ non_field_errors_text }}</div>
    {% endif %}

    <form class="auth-form" method="post" action="{{ action_url }}" novalidate>
      {% csrf_token %}

      <div class="field">
        <label for="register_id_full_name">{% trans "Nom complet" %}</label>
        {% with error=field_errors_text.full_name %}
          <input id="register_id_full_name"
                 name="full_name"
                 type="text"
                 autocomplete="name"
                 required
                 aria-invalid="{{ error|yesno:'true,false' }}"
                 {% if error %}aria-describedby="register_err_full_name"{% endif %}
                 value="{{ values.full_name|default_if_none:'' }}">
          {% if error %}
            <div class="alert error field-error" id="register_err_full_name">{{ error }}</div>
          {% endif %}
        {% endwith %}
      </div>

      <div class="field">
        <label for="register_id_email">{% trans "Adresse e‚Äëmail" %}</label>
        {% with error=field_errors_text.email %}
          <input id="register_id_email"
                 name="email"
                 type="email"
                 autocomplete="email"
                 required
                 aria-invalid="{{ error|yesno:'true,false' }}"
                 {% if error %}aria-describedby="register_err_email"{% endif %}
                 value="{{ values.email|default_if_none:'' }}">
          {% if error %}
            <div class="alert error field-error" id="register_err_email">{{ error }}</div>
          {% endif %}
        {% endwith %}
      </div>

      <div class="field">
        <label for="register_id_password1">{% trans "Mot de passe" %}</label>
        {% with error=field_errors_text.password1 %}
          <div class="password-field">
            <input id="register_id_password1"
                   name="password1"
                   type="password"
                   autocomplete="new-password"
                   required
                   aria-invalid="{{ error|yesno:'true,false' }}"
                   {% if error %}aria-describedby="register_err_password1"{% endif %}>
            <button type="button"
                    class="pw-toggle"
                    aria-controls="register_id_password1"
                    aria-label="{% trans 'Afficher le mot de passe' %}"
                    data-label-hide="{% trans 'Masquer le mot de passe' %}">üëÅ</button>
          </div>
          <small class="caps-hint">{% trans "Verr Maj activ√©e" %}</small>
          <small class="hint">{% trans "8+ caract√®res. √âvite les mots de passe trop communs." %}</small>
          {% if error %}
            <div class="alert error field-error" id="register_err_password1">{{ error }}</div>
          {% endif %}
        {% endwith %}
      </div>

      <div class="field">
        <label for="register_id_password2">{% trans "Confirmer le mot de passe" %}</label>
        {% with error=field_errors_text.password2 %}
          <div class="password-field">
            <input id="register_id_password2"
                   name="password2"
                   type="password"
                   autocomplete="new-password"
                   required
                   aria-invalid="{{ error|yesno:'true,false' }}"
                   {% if error %}aria-describedby="register_err_password2"{% endif %}>
            <button type="button"
                    class="pw-toggle"
                    aria-controls="register_id_password2"
                    aria-label="{% trans 'Afficher le mot de passe' %}"
                    data-label-hide="{% trans 'Masquer le mot de passe' %}">üëÅ</button>
          </div>
          <small class="caps-hint">{% trans "Verr Maj activ√©e" %}</small>
          {% if error %}
            <div class="alert error field-error" id="register_err_password2">{{ error }}</div>
          {% endif %}
        {% endwith %}
      </div>

      <div class="field checkbox-field">
        <label><input type="checkbox" name="marketing_opt_in" {% if values.marketing_opt_in %}checked{% endif %}> {% trans "Recevoir les offres et actualit√©s" %}</label>
      </div>

      <div class="auth-actions">
        <button class="btn-primary" type="submit">{% trans "Cr√©er mon compte" %}</button>
      </div>

      <div class="meta-links">
        <span>{% trans "D√©j√† inscrit ?" %} <a href="{{ links.login }}">{% trans "Se connecter" %}</a></span>
      </div>
    </form>
  </div>
</section>
