[
  {
    "module_test": "apps.atelier.scripts.formfront.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.014s",
    "stack": "â†’ Running test_2a_template_markers\nRESULT:OK in 0.000s\nâ†’ Running test_2b_render_template_isole\nRESULT:OK in 0.000s\nâ†’ Running test_2c_hydrateur_contexte\nRESULT:OK in 0.026s\nâ†’ Running test_2d_dom_debug_home\nRESULT:OK in 0.456s\nâ†’ Running test_2e_no_wizard_ctx_on\nRESULT:OK in 0.000s\nâ†’ Running test_3a_shadow_parity\nRESULT:OK in 0.002s\nâ†’ Running test_3b_shadow_logs\nRESULT:OK in 0.000s\n/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/forms/wizard/contracts.py:15: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/\n  @validator(\"flow_key\")\n/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/forms/wizard/contracts.py:22: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/\n  @validator(\"config_json\")\nâ†’ Running test_5a_child_contract_required\nRESULT:OK in 0.001s\nâ†’ Running test_5b_child_cache_stability\nRESULT:OK in 0.000s\nâ†’ Running test_5c_child_cache_invalidation\nRESULT:OK in 0.000s\nâ†’ Running test_6_sanity\nRESULT:OK in 0.475s\nâ†’ Running test_6_submit_ok\n\n\n\n\n\n\n=== RÃ©sumÃ© === \n- OK   | status=202 | local_valid=False \n- FAIL | status=202 | local_valid=False \n- OK   | status=400 | local_valid=False \n- OK   | status=400 | local_valid=False \n- OK   | status=400 | local_valid=False \n- OK   | status=400 | local_valid=False\nRESULT:KO in 0.050s\nâ†’ Running test_step_0_flag\n['âœ… FLOWFORMS_POLICY_YAML = /Users/elazhar/PycharmProjects/lumierelearning/configs/flowforms.yaml', 'âœ… FLOWFORMS_DEFAULT_FLOW_KEY = checkout_intent_flow', 'âœ… FLOWFORMS_ENDPOINT_COLLECT_URLNAME = leads:collect', 'âœ… FLOWFORMS_REQUIRE_SIGNED = True', 'âœ… FLOWFORMS_SIGN_URLNAME = leads:sign', 'âœ… FLOWFORMS_COMPONENT_ENABLED = True', 'âœ… GET / â†’ 200', 'âœ… Runtime dÃ©tectÃ© dans lâ€™HTML', 'âœ… Wizard DOM prÃ©sent (root)']\nRESULT:OK in 0.034s\n/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/\n  warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/forms/shell/contracts.py:65: PydanticDeprecatedSince20: Pydantic V1 style `@root_validator` validators are deprecated. You should migrate to Pydantic V2 style `@model_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/\n  @root_validator(pre=True)\nâ†’ Running test_step_1_contract_parent\nRESULT:OK in 0.001s\nâ†’ Running test_step_2_e2e_submit_compose\nRESULT:OK in 0.015s\nâ†’ Running test_step_2_hydrator_child_params\nRESULT:OK in 0.002s\nâ†’ Running test_step_2_manifest_compose\nRESULT:OK in 0.000s\nâ†’ Running test_step_2_render_flag_on\nRESULT:KO in 0.014s\nTerminÃ©: 16/18 OK en 1.23s",
    "app": "atelier",
    "suite_runner": "apps.atelier.scripts.formfront.run_all"
  },
  {
    "module_test": "apps.atelier.scripts.phase3.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.007s reason=exception",
    "stack": "â†’ Running test_ab_resolution_smoke\n=== ab_resolution_smoke ===\nRÃ©partition: {'A': 100, 'B': 0, 'OTHER': 0}\n=> A/B resolution smoke OK âœ… (B facultatif en P0)\nRESULT:OK in 0.003s\nâ†’ Running test_analytics_ingest_smoke\n=== analytics_ingest_smoke ===\n=> Analytics ingest OK âœ…\nRESULT:OK in 0.000s\nâ†’ Running test_cache_fragments_smoke\n=== cache_fragments_smoke ===\nheader initial cache: MISS\nhero initial cache: HIT\nfooter initial cache: HIT\nheader second cache: MISS\nhero second cache: HIT\nfooter second cache: HIT\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase3/tests_scripts/test_cache_fragments_smoke.py\", line 40, in run\n    assert all(hits), \"Tous les slots ne sont pas en HIT au second passage\"\nAssertionError: Tous les slots ne sont pas en HIT au second passage\nRESULT:KO in 0.019s reason=exception\nâ†’ Running test_components_registry_assets_check\n=== components_registry_assets_check ===\nKO: alias non enregistrÃ©s: ['hero/slider', 'cta/primary', 'proofbar/videos']\n[OK] header/struct â†’ /Users/elazhar/PycharmProjects/lumierelearning/templates/components/header/header_struct.html\n[OK] hero/cover â†’ /Users/elazhar/PycharmProjects/lumierelearning/templates/components/slider/slider.html\n[OK] footer/main â†’ /Users/elazhar/PycharmProjects/lumierelearning/templates/components/footer/footer.html\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase3/tests_scripts/test_components_registry_assets_check.py\", line 46, in run\n    assert not missing_templates, f\"Templates manquants: {missing_templates}\"\nAssertionError: Templates manquants: [('hero/slider', 'template non dÃ©fini'), ('cta/primary', 'template non dÃ©fini'), ('proofbar/videos', 'template non dÃ©fini')]\nRESULT:KO in 0.007s reason=exception\nâ†’ Running test_composer_warmup\nWARMED fragments: 10\nRESULT:OK in 0.007s\nâ†’ Running test_experiments_integrity\n=== experiments_integrity ===\n\n\n\n\n{'meta': {'title': 'LumiÃ¨re Academy â€” Fabrication de bougies', 'description': 'Participez Ã  nos cours et apprenez des techniques artisanales.'}, 'slots': {'vendors': {'variants': {'A': 'vendors/core'}, 'children': {}}, 'header': {'variants': {'A': 'header/struct'}, 'cache': False, 'children': {}}, 'hero': {'variants': {'A': 'hero/cover'}, 'children': {}}, 'learning_card': {'variants': {'A': 'learning/card'}, 'children': {}}, 'learning_content': {'variants': {'A': 'learning/content'}, 'children': {}}, 'highlights': {'variants': {'A': 'learning/highlights'}, 'children': {}}, 'faq': {'variants': {'A': 'faq/main'}, 'children': {}}, 'trainer': {'variants': {'A': 'trainer/profile'}, 'children': {}}, 'footer': {'variants': {'A': 'footer/main'}, 'children': {}}, 'lead_form': {'variants': {'A': 'forms/shell'}, 'children': {}}}}\n\n\n\n\nWARN: variante B absente; seul A actif\n=> Pages & expÃ©riences OK âœ…\nRESULT:OK in 0.000s\nâ†’ Running test_leads_api_suite\n=== leads_api_suite ===\nPOST email_ebook â†’ 202 b'{\"status\":\"duplicate\",\"detail\":\"d\\xc3\\xa9j\\xc3\\xa0 re\\xc3\\xa7u\"}'\nPOST contact_full â†’ 202 b'{\"status\":\"duplicate\",\"detail\":\"d\\xc3\\xa9j\\xc3\\xa0 re\\xc3\\xa7u\"}'\nPOST checkout_intent â†’ 202 b'{\"status\":\"duplicate\",\"detail\":\"d\\xc3\\xa9j\\xc3\\xa0 re\\xc3\\xa7u\"}'\n=> Leads API suite OK âœ…\nRESULT:OK in 0.008s\nâ†’ Running test_pipeline_online_home_smoke\n=== pipeline_online_home_smoke ===\n[OK] slot=hero rendered (2358 chars)\n[OK] slot=footer rendered (3566 chars)\n[OK] slot=header rendered (4134 chars)\nAssets: css=13 js=7 head=4\n=> Pipeline smoke OK âœ…\nRESULT:OK in 0.005s\nâ†’ Running test_qa_preview_isolation\n=== qa_preview_isolation ===\nkey_std = online_home|hero|A|fr|d|N|||v1\nkey_prev = online_home|hero|A|fr|d|N|||v1|qa\n=> QA preview isolation OK âœ…\nRESULT:OK in 0.001s\nTerminÃ©: 7/9 OK en 0.11s",
    "app": "atelier",
    "suite_runner": "apps.atelier.scripts.phase3.run_all"
  },
  {
    "module_test": "apps.atelier.scripts.phase6.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.147s reason=exception",
    "stack": "â†’ Running test_assets_dedup_order_check\n=== phase6/assets_dedup_order_check ===\n[OK] DÃ©duplication & ordre stables\n=> PASS âœ…\nRESULT:OK in 0.000s\nâ†’ Running test_components_registry_assets_check\n=== phase6/components_registry_assets_check ===\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase6/tests_scripts/test_components_registry_assets_check.py\", line 22, in run\n    assert not missing, f\"Alias non enregistrÃ©s: {missing}\"\nAssertionError: Alias non enregistrÃ©s: ['hero/slider', 'proofbar/videos', 'cta/primary']\nRESULT:KO in 0.007s reason=exception\nâ†’ Running test_compose_response_smoke\n=== phase6/compose_response_smoke ===\n=> PASS âœ…\nRESULT:OK in 0.010s\nâ†’ Running test_content_training_smoke\n== content_training smoke ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase6/tests_scripts/test_content_training_smoke.py\", line 15, in run\n    count, warns = discover(override=True)\nTypeError: discover() got an unexpected keyword argument 'override'\nRESULT:KO in 0.007s reason=exception\nâ†’ Running test_contracts_audit\n\n=== Contrats â€” RÃ©sumÃ© (runscript) ===\nChecks: 22 | OK: 4 | WARN: 0 | ERROR: 18\nVoir: reports/contracts/<timestamp>_report.md  et  _stream.jsonl\n\nRESULT:OK in 0.014s\nâ†’ Running test_contracts_validation_smoke\n=== phase6/contracts_validation_smoke ===\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase6/tests_scripts/test_contracts_validation_smoke.py\", line 31, in run\n    validate(a, ctx)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/contracts.py\", line 175, in validate\n    raise ContractValidationError(f\"[contracts] alias={alias} erreurs={errors}\")\napps.atelier.components.contracts.ContractValidationError: [contracts] alias=header/struct erreurs={'topbar': 'type invalide: attendu Bloc topbar requis (structure connue)', 'contact': 'type invalide: attendu CoordonnÃ©es de contact requises', 'socials': 'type invalide: attendu Liens sociaux optionnels'}\nRESULT:KO in 0.013s reason=exception\nâ†’ Running test_cover_hightlights_smoke\n== Cover/highlights AUTOPSY ==\ndiscovery.count=11, warns=0\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase6/tests_scripts/test_cover_hightlights_smoke.py\", line 79, in run\n    raise CommandError(f\"Alias absent du registry: {ALIAS}\")\ndjango.core.management.base.CommandError: Alias absent du registry: cover/highlights\nRESULT:KO in 0.147s reason=exception\nâ†’ Running test_graceful_failures\n=== phase6/graceful_failures ===\n[OK] collect_for unknown alias -> vide (aucune erreur)\n[OK] validate unknown alias -> no-op\n=> PASS âœ…\nRESULT:OK in 0.000s\nâ†’ Running test_header_virtual_slots_smoke\n== Header COMPOSE audit ==\ndiscovery.count=11, warns=0\nmanifests_on_disk=11\n  - alias 'header/main': 1 manifest(s)\n    Â· /Users/elazhar/PycharmProjects/lumierelearning/templates/components/header/main/manifest.yml\n      compose.children? False\n  - alias 'header/mobile': 1 manifest(s)\n    Â· /Users/elazhar/PycharmProjects/lumierelearning/templates/components/header/mobile/manifest.yml\n      compose.children? False\n  - alias 'header/struct': 1 manifest(s)\n    Â· /Users/elazhar/PycharmProjects/lumierelearning/templates/components/header/manifest.yml\n      compose.children? True\n\n== Registry snapshots ==\nregistry.header/struct: {\n  \"template\": \"components/header/header_struct.html\",\n  \"params\": {\n    \"topbar\": {\n      \"enabled\": false,\n      \"text_html\": \"\",\n      \"cta\": null\n    },\n    \"contact\": {\n      \"phone_tel\": \"\",\n      \"phone_display\": \"\",\n      \"email\": \"\",\n      \"address_url\": \"\",\n      \"address_text\": \"\"\n    },\n    \"socials\": []\n  },\n  \"assets\": {\n    \"head\": [],\n    \"css\": [],\n    \"js\": [],\n    \"vendors\": []\n  },\n  \"contract\": {\n    \"required\": {\n      \"topbar\": \"Bloc topbar requis (structure connue)\",\n      \"contact\": \"CoordonnÃ©es de contact requises\"\n    },\n    \"optional\": {\n      \"socials\": \"Liens sociaux optionnels\"\n    }\n  },\n  \"hydrate\": {\n    \"module\": \"apps.atelier.compose.hydrators.header.hydrators\",\n    \"func\": \"header_struct\",\n    \"params\": {\n      \"topbar\": {\n        \"enabled\": false,\n        \"text_html\": \"\",\n        \"cta\": null\n      },\n      \"contact\": {\n        \"phone_tel\": \"\",\n        \"phone_display\": \"\",\n        \"email\": \"\",\n        \"address_url\": \"\",\n        \"address_text\": \"\"\n      },\n      \"socials\": []\n    }\n  },\n  \"render\": {\n    \"cacheable\": false\n  },\n  \"compose\": {\n    \"children\": {\n      \"main\": \"header/main\",\n      \"mobile\": \"header/mobile\"\n    }\n  }\n}\nregistry.header/main: {\n  \"template\": \"components/header/main/header_main.html\",\n  \"params\": {\n    \"logo_src\": \"images/logo.webp\",\n    \"logo_alt\": \"EduLe\",\n    \"home_url\": \"#\",\n    \"show_auth_links\": true,\n    \"menu\": [\n      {\n        \"label\": \"Accueil\",\n        \"url\": \"#\"\n      },\n      {\n        \"label\": \"Nos Formations\",\n        \"children\": [\n          {\n            \"label\": \"Formation en ligne\",\n            \"url\": \"#\"\n          }\n        ]\n      },\n      {\n        \"label\": \"Nos Cours\",\n        \"url\": \"#\"\n      },\n      {\n        \"label\": \"Q&A\",\n        \"url\": \"#\"\n      },\n      {\n        \"label\": \"Contact\",\n        \"url\": \"#\"\n      }\n    ]\n  },\n  \"assets\": {\n    \"head\": [],\n    \"css\": [],\n    \"js\": [],\n    \"vendors\": []\n  },\n  \"contract\": {\n    \"required\": {\n      \"logo_src\": \"Chemin image logo (ex: images/logo.webp)\",\n      \"logo_alt\": \"Texte alternatif\",\n      \"menu\": \"Menu de navigation (liste de dicts)\"\n    },\n    \"optional\": {\n      \"show_auth_links\": \"Affichage des liens d'authentification\",\n      \"home_url\": \"URL d'accueil (peut Ãªtre hydratÃ©e)\"\n    }\n  },\n  \"hydrate\": {\n    \"module\": \"apps.atelier.compose.hydrators.header.hydrators\",\n    \"func\": \"header_main\",\n    \"params\": {\n      \"logo_src\": \"images/logo.webp\",\n      \"logo_alt\": \"EduLe\",\n      \"home_url\": \"#\",\n      \"show_auth_links\": true,\n      \"menu\": [\n        {\n          \"label\": \"Accueil\",\n          \"url\": \"#\"\n        },\n        {\n          \"label\": \"Nos Formations\",\n          \"children\": [\n            {\n              \"label\": \"Formation en ligne\",\n              \"url\": \"#\"\n            }\n          ]\n        },\n        {\n          \"label\": \"Nos Cours\",\n          \"url\": \"#\"\n        },\n        {\n          \"label\": \"Q&A\",\n          \"url\": \"#\"\n        },\n        {\n          \"label\": \"Contact\",\n          \"url\": \"#\"\n        }\n      ]\n    }\n  },\n  \"render\": {},\n  \"compose\": {}\n}\nregistry.header/mobile: {\n  \"template\": \"components/header/mobile/mobile_menu.html\",\n  \"params\": {\n    \"contact\": {\n      \"phone_tel\": \"+212808544450\",\n      \"phone_display\": \"+212 8085-44450\",\n      \"email\": \"partenariat@lumiereacademy.com\",\n      \"address_url\": \"https://maps.app.goo.gl/mmFtjAtAiujXCutw6\",\n      \"address_text\": \"NÂ° 18 Rue Patrice Lumumba, Rabat 10000, Maroc\"\n    },\n    \"socials\": [\n      {\n        \"icon\": \"flaticon-instagram\",\n        \"url\": \"https://www.instagram.com/lumieresrabat/\",\n        \"new_tab\": true\n      },\n      {\n        \"icon\": \"flaticon-linkedin\",\n        \"url\": \"https://www.linkedin.com/company/lumiereacadem\",\n        \"new_tab\": true\n      }\n    ],\n    \"login_url\": null,\n    \"register_url\": null,\n    \"menu\": [\n      {\n        \"label\": \"Accueil\",\n        \"url_name\": \"pages:home\"\n      },\n      {\n        \"label\": \"Nos Formations\",\n        \"children\": [\n          {\n            \"label\": \"Formation en ligne\",\n            \"url\": \"#\"\n          }\n        ]\n      },\n      {\n        \"label\": \"Nos Cours\",\n        \"url\": \"#\"\n      },\n      {\n        \"label\": \"Q&A\",\n        \"url\": \"#\"\n      },\n      {\n        \"label\": \"Contact\",\n        \"url\": \"#\"\n      }\n    ]\n  },\n  \"assets\": {\n    \"head\": [],\n    \"css\": [],\n    \"js\": [],\n    \"vendors\": []\n  },\n  \"contract\": {\n    \"required\": {\n      \"contact\": \"CoordonnÃ©es contact pour top bloc mobile\",\n      \"menu\": \"Menu mobile (liste de dicts)\"\n    },\n    \"optional\": {\n      \"socials\": \"Liens sociaux optionnels\",\n      \"login_url\": \"URL connexion\",\n      \"register_url\": \"URL inscription\"\n    }\n  },\n  \"hydrate\": {\n    \"module\": \"apps.atelier.compose.hydrators.header.hydrators\",\n    \"func\": \"header_mobile\",\n    \"params\": {\n      \"contact\": {\n        \"phone_tel\": \"+212808544450\",\n        \"phone_display\": \"+212 8085-44450\",\n        \"email\": \"partenariat@lumiereacademy.com\",\n        \"address_url\": \"https://maps.app.goo.gl/mmFtjAtAiujXCutw6\",\n        \"address_text\": \"NÂ° 18 Rue Patrice Lumumba, Rabat 10000, Maroc\"\n      },\n      \"socials\": [\n        {\n          \"icon\": \"flaticon-instagram\",\n          \"url\": \"https://www.instagram.com/lumieresrabat/\",\n          \"new_tab\": true\n        },\n        {\n          \"icon\": \"flaticon-linkedin\",\n          \"url\": \"https://www.linkedin.com/company/lumiereacadem\",\n          \"new_tab\": true\n        }\n      ],\n      \"login_url\": null,\n      \"register_url\": null,\n      \"menu\": [\n        {\n          \"label\": \"Accueil\",\n          \"url_name\": \"pages:home\"\n        },\n        {\n          \"label\": \"Nos Formations\",\n          \"children\": [\n            {\n              \"label\": \"Formation en ligne\",\n              \"url\": \"#\"\n            }\n          ]\n        },\n        {\n          \"label\": \"Nos Cours\",\n          \"url\": \"#\"\n        },\n        {\n          \"label\": \"Q&A\",\n          \"url\": \"#\"\n        },\n        {\n          \"label\": \"Contact\",\n          \"url\": \"#\"\n        }\n      ]\n    }\n  },\n  \"render\": {},\n  \"compose\": {}\n}\n[OK] compose.children prÃ©sent: {'main': 'header/main', 'mobile': 'header/mobile'}\n\n== Templates & marqueurs ==\nparent.template=components/header/header_struct.html exists=True\n  contains '{{ children.header_struct__main': True\n  contains '{{ children.header_struct__mobile': True\nchild.main.template=components/header/main/header_main.html exists=True\n  contains 'header-main-wrapper': True\nchild.mobile.template=components/header/mobile/mobile_menu.html exists=True\n  contains id='mobileMenu': True\n\n== Render children (direct) ==\n[OK] child main rendered â†’ reports/debug/header_compose/child_main.html size=593 bytes\n[OK] child mobile rendered â†’ reports/debug/header_compose/child_mobile.html size=761 bytes\n\n== Pipeline page slot: header ==\nslot.header: {\n  \"id\": \"header\",\n  \"alias\": \"header/struct\",\n  \"variant_key\": \"A\",\n  \"cache\": false,\n  \"cache_key\": \"\",\n  \"params\": {},\n  \"children\": {\n    \"main\": {\n      \"alias\": \"header/main\",\n      \"variant_key\": \"A\",\n      \"params\": {},\n      \"cache_hint\": null\n    },\n    \"mobile\": {\n      \"alias\": \"header/mobile\",\n      \"variant_key\": \"A\",\n      \"params\": {},\n      \"cache_hint\": null\n    }\n  },\n  \"content_rev\": \"v1|ch:4050c25904\",\n  \"children_aliases\": [\n    \"header/main\",\n    \"header/mobile\"\n  ]\n}\n[OK] parent rendered â†’ reports/debug/header_compose/parent_header_struct.html size=4134 bytes\n\n== VERDICT ==\n[SUCCESS] Le header parent contient ses enfants (main + mobile).\nRESULT:OK in 0.296s\nâ†’ Running test_pipeline_assets_integration\n=== phase6/pipeline_assets_integration ===\n[OK] assets build=13/7/4 ; render_page OK\n=> PASS âœ…\nRESULT:OK in 0.007s\nâ†’ Running test_slider_smoke\n== Slider (hero/cover) smoke ==\ndiscovery.count=11, warns=0\nregistry.meta: {\n  \"template\": \"components/slider/slider.html\",\n  \"params\": {\n    \"badge_html\": \"\",\n    \"title_sub\": \"Transformez votre passion en savoir-faire\",\n    \"title_main\": \"MaÃ®trisez la fabrication de bougies.\",\n    \"description\": \"Apprenez Ã  crÃ©er des bougies uniques avec nos cours, et dÃ©veloppez des compÃ©tences artisanales qui vous dÃ©marquent.\",\n    \"price\": 169,\n    \"promotion_pct\": 30,\n    \"cta\": {\n      \"label\": \"Apprenez maintenant\",\n      \"url\": \"#\"\n    },\n    \"slider_image\": \"images/slider/slider-1\",\n    \"video_url\": \"https://www.youtube.com/watch?v=Aj75R0ojBa0\",\n    \"rating\": {\n      \"value\": 4.8,\n      \"count\": 86000\n    },\n    \"style\": {\n      \"price_box_bg\": \"#FF4500\"\n    }\n  },\n  \"assets\": {\n    \"head\": [],\n    \"css\": [\n      \"/static/components/slider/slider.css\"\n    ],\n    \"js\": [],\n    \"vendors\": []\n  },\n  \"contract\": {\n    \"required\": {},\n    \"optional\": {\n      \"badge_html\": \"HTML badge facultatif\",\n      \"title_sub\": \"Sous-titre\",\n      \"title_main\": \"Titre principal\",\n      \"description\": \"Paragraphe dâ€™accroche\",\n      \"price\": \"Prix affichÃ© (int)\",\n      \"promotion_pct\": \"Remise en % (int)\",\n      \"cta\": \"CTA {label, url}\",\n      \"slider_image\": \"Chemin base variant (responsive_picture)\",\n      \"video_url\": \"URL vidÃ©o\",\n      \"rating\": \"Note {value, count}\",\n      \"style\": \"Styles divers {price_box_bg}\"\n    }\n  },\n  \"hydrate\": {\n    \"python\": \"apps.atelier.compose.hydrators.slider.hydrators.hero_cover\",\n    \"module\": \"apps.atelier.compose.hydrators.slider.hydrators\",\n    \"func\": \"hero_cover\",\n    \"params\": {\n      \"badge_html\": \"\",\n      \"title_sub\": \"Transformez votre passion en savoir-faire\",\n      \"title_main\": \"MaÃ®trisez la fabrication de bougies.\",\n      \"description\": \"Apprenez Ã  crÃ©er des bougies uniques avec nos cours, et dÃ©veloppez des compÃ©tences artisanales qui vous dÃ©marquent.\",\n      \"price\": 169,\n      \"promotion_pct\": 30,\n      \"cta\": {\n        \"label\": \"Apprenez maintenant\",\n        \"url\": \"#\"\n      },\n      \"slider_image\": \"images/slider/slider-1\",\n      \"video_url\": \"https://www.youtube.com/watch?v=Aj75R0ojBa0\",\n      \"rating\": {\n        \"value\": 4.8,\n        \"count\": 86000\n      },\n      \"style\": {\n        \"price_box_bg\": \"#FF4500\"\n      }\n    }\n  },\n  \"render\": {\n    \"cacheable\": true\n  },\n  \"compose\": {}\n}\n[A] hydrate price=169\n[OK] render direct â†’ reports/debug/slider/direct.html\n[OK] render pipeline â†’ reports/debug/slider/pipeline.html\n== SUCCESS ==\nRESULT:OK in 0.145s\nTerminÃ©: 7/11 OK en 0.71s",
    "app": "atelier",
    "suite_runner": "apps.atelier.scripts.phase6.run_all"
  },
  {
    "module_test": "apps.atelier.scripts.phase8.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.006s reason=exception",
    "stack": "â†’ Running test_assets_include_children_aliases\n=== phase8/assets_include_children_aliases ===\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/phase8/tests_scripts/test_assets_include_children_aliases.py\", line 18, in run\n    assert \"components/header/mobile-menu.css\" in css, \"Assets enfants non agrÃ©gÃ©s\"\nAssertionError: Assets enfants non agrÃ©gÃ©s\nRESULT:KO in 0.006s reason=exception\nâ†’ Running test_children_fingerprint_salts_content_rev\n=== phase8/children_fingerprint_salts_content_rev ===\nrev1 = v1|ch:4050c25904\nrev2 = v1|ch:4050c25904\nRESULT:OK in 0.005s\nâ†’ Running test_children_override_renders\n=== phase8/children_override_renders ===\n=> OK\nRESULT:OK in 0.004s\nâ†’ Running test_parent_cache_effective_with_dynamic_children\n=== phase8/parent_cache_effective_with_dynamic_children ===\n=> OK\nRESULT:OK in 0.005s\nTerminÃ©: 3/4 OK en 0.04s",
    "app": "atelier",
    "suite_runner": "apps.atelier.scripts.phase8.run_all"
  },
  {
    "module_test": "apps.atelier.scripts.suite.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.029s reason=exception",
    "stack": "â†’ Running test_ab_preview_smoke\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/suite/tests_scripts/test_ab_preview_smoke.py\", line 10, in run\n    v, alias = resolve_variant(\"hero_v2\", req)\nTypeError: resolve_variant() missing 1 required positional argument: 'request'\nRESULT:KO in 0.006s reason=exception\nâ†’ Running test_analytics_ingest_smoke\nanalytics_ingest_smoke: placeholder OK\nRESULT:OK in 0.000s\nâ†’ Running test_atelier_app_smoke\n=== atelier_app_smoke: START ===\nsys.path[0]: /Users/elazhar/PycharmProjects/lumierelearning\n[FIND] apps.atelier @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/__init__.py\n[OK]   apps.atelier\n[FIND] apps.atelier.apps @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/apps.py\n[OK]   apps.atelier.apps\n[FIND] apps.atelier.admin @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/admin.py\n[OK]   apps.atelier.admin\n[FIND] apps.atelier.models @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/models.py\n[OK]   apps.atelier.models\n[FIND] apps.atelier.services @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/services.py\n[OK]   apps.atelier.services\n[FIND] apps.atelier.middleware @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/middleware/__init__.py\n[OK]   apps.atelier.middleware\n[FIND] apps.atelier.middleware.request_id @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/middleware/request_id.py\n[OK]   apps.atelier.middleware.request_id\n[FIND] apps.atelier.middleware.segments @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/middleware/segments.py\n[OK]   apps.atelier.middleware.segments\n[FIND] apps.atelier.middleware.vary @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/middleware/vary.py\n[OK]   apps.atelier.middleware.vary\n[FIND] apps.atelier.config @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/config/__init__.py\n[OK]   apps.atelier.config\n[FIND] apps.atelier.config.loader @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/config/loader.py\n[OK]   apps.atelier.config.loader\n[FIND] apps.atelier.config.schema @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/config/schema.py\n[OK]   apps.atelier.config.schema\n[FIND] apps.atelier.config.registry @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/config/registry.py\n[OK]   apps.atelier.config.registry\n[FIND] apps.atelier.ab @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/ab/__init__.py\n[OK]   apps.atelier.ab\n[FIND] apps.atelier.ab.waffle @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/ab/waffle.py\n[OK]   apps.atelier.ab.waffle\n[FIND] apps.atelier.ab.guard @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/ab/guard.py\n[OK]   apps.atelier.ab.guard\n[FIND] apps.atelier.components @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/__init__.py\n[OK]   apps.atelier.components\n[FIND] apps.atelier.components.registry @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/registry.py\n[OK]   apps.atelier.components.registry\n[FIND] apps.atelier.components.contracts @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/contracts.py\n[OK]   apps.atelier.components.contracts\n[FIND] apps.atelier.components.assets @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/assets.py\n[OK]   apps.atelier.components.assets\n[FIND] apps.atelier.components.metrics @ /Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/components/metrics.py\n[OK]   apps.atelier.components.metrics\n[MISS] apps.atelier.components.templatetags â€” introuvable dans sys.meta_path\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/atelier/scripts/suite/tests_scripts/test_atelier_app_smoke.py\", line 53, in run\n    spec = importlib.util.find_spec(module)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/importlib/util.py\", line 94, in find_spec\n    parent = __import__(parent_name, fromlist=['__path__'])\nModuleNotFoundError: No module named 'apps.atelier.components.templatetags'\nRESULT:KO in 0.029s reason=exception\nâ†’ Running test_base_template_blocks_check\n=== base_template_blocks_check: START ===\n[MISS]  block `tags_header` non trouvÃ©\n[FOUND] block `meta_header`\n[FOUND] block `styles`\n[FOUND] block `extra_css`\n[FOUND] block `extra_head`\n[FOUND] block `tags_body`\n[FOUND] block `header`\n[FOUND] block `messages`\n[FOUND] block `content`\n[FOUND] block `sidebar`\n[FOUND] block `footer`\n[FOUND] block `scripts`\n[FOUND] block `js`\n[FOUND] block `before_end_body`\n=== base_template_blocks_check: FAIL ===\nRESULT:OK in 0.000s\nâ†’ Running test_cache_fragments_smoke\nlen1= 10 len2= 10\nRESULT:OK in 0.015s\nâ†’ Running test_composer_pages_spec_check\ncomposer_pages_spec_check: placeholder OK\nRESULT:OK in 0.000s\nâ†’ Running test_experiments_cleanup\nexperiments_cleanup: placeholder OK\nRESULT:OK in 0.000s\nâ†’ Running test_experiments_integrity\nexperiments_integrity: placeholder OK\nRESULT:OK in 0.000s\nâ†’ Running test_forms_check\n\n\u001b[94m=== ğŸš€ FlowForms Inline Probe â€” Home Page ===\u001b[0m\n  ğŸ§© \u001b[0mEnvironnement\u001b[0m\n    - DEBUG: \u001b[96mTrue\u001b[0m\n    - LANGUAGE_CODE: \u001b[96mfr-fr\u001b[0m\n    - FLOWFORMS_POLICY_YAML: \u001b[96m/Users/elazhar/PycharmProjects/lumierelearning/configs/flowforms.yaml\u001b[0m\n\n\u001b[94m=== ğŸ§­ RequÃªte Home ===\u001b[0m\n\n\u001b[94m=== ğŸ‘ï¸ Inspection DOM (wizard inline) ===\u001b[0m\n\n\u001b[94m=== ğŸ”Œ VÃ©rification wizard serveur ===\u001b[0m\n\n\u001b[94m=== ğŸ” RÃ©sultats des contrÃ´les ===\u001b[0m\nâŒ  \u001b[91mApps installÃ©es (pages, flowforms, leads)\u001b[0m\n  â„¹ï¸ \u001b[0mINSTALLED_APPS contient: â€”\u001b[0m\n  ğŸ› ï¸ \u001b[93mVÃ©rifie INSTALLED_APPS pour 'apps.pages', 'apps.flowforms', 'apps.leads'.\u001b[0m\nâœ…  \u001b[92mConfig FlowForms chargÃ©e (checkout_intent_flow)\u001b[0m\n  â„¹ï¸ \u001b[0mkind=checkout_intent\u001b[0m\n  â„¹ï¸ \u001b[0msteps=2 (step1, step2)\u001b[0m\nâœ…  \u001b[92mHTTP 200 sur la home\u001b[0m\n  â„¹ï¸ \u001b[0mGET / â†’ 200\u001b[0m\n  â„¹ï¸ \u001b[0mSnapshot: /tmp/flowforms_home_snapshot.html\u001b[0m\nâœ…  \u001b[92mBloc wizard prÃ©sent (ff-root + steps 1/2/3)\u001b[0m\n  â„¹ï¸ \u001b[0mff-root count=1\u001b[0m\n  â„¹ï¸ \u001b[0msteps: s1=1 s2=1 s3=0\u001b[0m\nâœ…  \u001b[92mAsset JS runtime inclus dans la page\u001b[0m\n  â„¹ï¸ \u001b[0mTag <script src=\"/static/js/flowforms.runtime.js\"> trouvÃ©\u001b[0m\nâœ…  \u001b[92mConfig JSON embarquÃ©e (data-ff-config)\u001b[0m\n  â„¹ï¸ \u001b[0mflow_key=checkout_intent_flow\u001b[0m\n  â„¹ï¸ \u001b[0mendpoint_url=/api/leads/collect/\u001b[0m\nâœ…  \u001b[92mRendu en display=inline (pas modal)\u001b[0m\n  â„¹ï¸ \u001b[0mHeuristique: prÃ©sence du container inline et des steps visibles dans le flux HTML.\u001b[0m\nâœ…  \u001b[92mEndpoint wizard /flowforms/checkout_intent_flow/ opÃ©rationnel\u001b[0m\n  â„¹ï¸ \u001b[0mGET /flows/checkout_intent_flow/ â†’ 200\u001b[0m\n  â„¹ï¸ \u001b[0mSentinel prÃ©sent\u001b[0m\n\u001b[90m------------------------------------------------------------------------------\u001b[0m\nâš ï¸ \u001b[93mDes anomalies ont Ã©tÃ© dÃ©tectÃ©es.\u001b[0m\n\u001b[90m------------------------------------------------------------------------------\u001b[0m\nğŸ“„ Snapshot HTML: /tmp/flowforms_home_snapshot.html\nâš¡ Fin du test.\nRESULT:OK in 0.092s\nâ†’ Running test_forms_e2e\n\nğŸ§ª  \u001b[1mFlowForms â€” E2E (simulÃ©) : Home â†’ Wizard â†’ Submit\u001b[0m\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mEnvironnement\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâ„¹ï¸  DEBUG: True\nâ„¹ï¸  LANGUAGE_CODE: fr-fr\nâ„¹ï¸  FLOWFORMS_POLICY_YAML: /Users/elazhar/PycharmProjects/lumierelearning/configs/flowforms.yaml\nâš ï¸  \u001b[93mApps manquantes: apps.pages, apps.flowforms, apps.leads\u001b[0m\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mRequÃªte Home (GET /)\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâœ…  GET / â†’ 200\nâ„¹ï¸  ğŸ“„  Snapshot: /tmp/flowforms_home_html_20250918-175338.txt\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mInspection DOM (wizard inline)\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâ„¹ï¸  ff-root: 1 | step1: 1 | step2: 1 | step3: 0\nâœ…  Bloc wizard prÃ©sent\nâœ…  Asset JS runtime dÃ©tectÃ© dans la page\nâœ…  RÃ¨gle CSS locale .d-none prÃ©sente (display:none)\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mExtraction config JSON (data-ff-config)\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâœ…  flow_key = checkout_intent_flow\nâ„¹ï¸  endpoint_url = /api/leads/collect/\nâ„¹ï¸  require_signed_token = True\nâ„¹ï¸  sign_url = /api/leads/sign/\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mVÃ©rification wizard serveur\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâœ…  GET /flows/checkout_intent_flow/ â†’ 200 (sentinel OK)\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mÃ‰tape 1 â€” champs & contraintes\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâœ…  Champ email prÃ©sent\nâš ï¸  \u001b[93mEmail NON marquÃ© requis\u001b[0m\nâš ï¸  \u001b[93mValidation email absente\u001b[0m\nâœ…  Bouton Continuer (data-ff-next) prÃ©sent\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mÃ‰tape 2 â€” structure\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâœ…  Step 2 prÃ©sent dans le DOM\nâ„¹ï¸  Champs step 2 â†’ first_name: OK ; prev: OK ; submit: OK\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mSoumission â€” POST endpoint de collecte\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nâ„¹ï¸  Signature du payloadâ€¦\nâœ…  Signature obtenue\nâ„¹ï¸  ğŸ“„  Snapshot: /tmp/flowforms_collect_response_20250918-175338.txt\nâœ…  Soumission acceptÃ©e (202) â€” FIN OK (le wizard passerait Ã  lâ€™Ã©tape 3)\nâ„¹ï¸  Rejoue la soumission avec la mÃªme idempotency key (idempotency check)\nâ„¹ï¸  HTTP 202 (attendu: 202, 200, 409â€¦ selon ta sÃ©mantique)\n\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§­  \u001b[96mRÃ©sumÃ©\u001b[0m\n\u001b[2mâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u001b[0m\nğŸ§©  Wizard: root=1 s1=1 s2=1 s3=0 | ğŸ§° flow=checkout_intent_flow signed=True endpoint=/api/leads/collect/\nâ„¹ï¸  Si le POST est 202, le runtime basculera en step 3 (merci). Si lâ€™UI ne change pas cÃ´tÃ© navigateur, câ€™est un souci de CSS (d-none) ou dâ€™assets.\nRESULT:OK in 0.057s\nâ†’ Running test_funnel_consistency\nfunnel_consistency: placeholder OK\nRESULT:OK in 0.000s\nâ†’ Running test_header_routes_trace\n\n\u001b[1mDISCOVERY\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n\u001b[36mâ„¹ï¸ \u001b[0m components discovered: 11\n\n\u001b[1mREGISTRY SNAPSHOT\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n\u001b[32mâœ…\u001b[0m \u001b[1mheader/struct\u001b[0m â†’ template=components/header/header_struct.html\n   ğŸ§© hydrate: apps.atelier.compose.hydrators.header.hydrators.header_struct\n\u001b[32mâœ…\u001b[0m \u001b[1mheader/main\u001b[0m â†’ template=components/header/main/header_main.html\n   ğŸ§© hydrate: apps.atelier.compose.hydrators.header.hydrators.header_main\n\u001b[32mâœ…\u001b[0m \u001b[1mheader/mobile\u001b[0m â†’ template=components/header/mobile/mobile_menu.html\n   ğŸ§© hydrate: apps.atelier.compose.hydrators.header.hydrators.header_mobile\n\n\u001b[1mURL NAMES CATALOG\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n\u001b[36mâ„¹ï¸ \u001b[0m 110 noms de routes chargÃ©s.\n\u001b[2mğŸ§¾ aperÃ§u: catalog_course_add, catalog_course_change, catalog_course_changelist, catalog_course_delete, catalog_course_history, home, login, register\u001b[0m\n\n\u001b[1mHEADER/MAIN â€” PARAMS MANIFEST (BRUTS)\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n{\n  \"home_url\": \"#\",\n  \"logo_alt\": \"EduLe\",\n  \"logo_src\": \"images/logo.webp\",\n  \"menu\": [\n    {\n      \"label\": \"Accueil\",\n      \"url\": \"#\"\n    },\n    {\n      \"children\": [\n        {\n          \"label\": \"Formation en ligne\",\n          \"url\": \"#\"\n        }\n      ],\n      \"label\": \"Nos Formations\"\n    },\n    {\n      \"label\": \"Nos Cours\",\n      \"url\": \"#\"\n    },\n    {\n      \"label\": \"Q&A\",\n      \"url\": \"#\"\n    },\n    {\n      \"label\": \"Contact\",\n      \"url\": \"#\"\n    }\n  ],\n  \"show_auth_links\": true\n}\nğŸŒ¿ \u001b[1mMenu (manifest brut)\u001b[0m\n  â€¢ \u001b[1mAccueil\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Formations\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m ni 'url' ni 'url_name' â€” fallback probable sur â€˜#â€™\n  â€¢ â†³ \u001b[1mFormation en ligne\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Cours\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mQ&A\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mContact\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n\n\u001b[1mHEADER/MAIN â€” CONTEXTE APRÃˆS HYDRATATION (manifest-first)\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n{\n  \"home_url\": \"#\",\n  \"logo_alt\": \"EduLe\",\n  \"logo_src\": \"images/logo.webp\",\n  \"show_auth_links\": true\n}\nğŸŒ¿ \u001b[1mMenu (aprÃ¨s hydration)\u001b[0m\n  â€¢ \u001b[1mAccueil\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Formations\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ â†³ \u001b[1mFormation en ligne\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Cours\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mQ&A\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mContact\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n\n\u001b[1mHEADER/MOBILE â€” PARAMS MANIFEST (BRUTS)\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n{\n  \"login_url\": null,\n  \"register_url\": null\n}\nğŸŒ¿ \u001b[1mMenu mobile (manifest brut)\u001b[0m\n  â€¢ \u001b[1mAccueil\u001b[0m\n     ğŸ”— \u001b[32mpages:home\u001b[0m â†’ /\n  â€¢ \u001b[1mNos Formations\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m ni 'url' ni 'url_name' â€” fallback probable sur â€˜#â€™\n  â€¢ â†³ \u001b[1mFormation en ligne\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Cours\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mQ&A\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mContact\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n\n\u001b[1mHEADER/MOBILE â€” CONTEXTE APRÃˆS HYDRATATION (manifest-first)\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n{\n  \"login_url\": \"/login/\",\n  \"register_url\": \"/register/\"\n}\nğŸŒ¿ \u001b[1mMenu mobile (aprÃ¨s hydration)\u001b[0m\n  â€¢ \u001b[1mAccueil\u001b[0m\n     ğŸ”— URL directe: \u001b[32m/\u001b[0m\n  â€¢ \u001b[1mNos Formations\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ â†³ \u001b[1mFormation en ligne\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mNos Cours\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mQ&A\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n  â€¢ \u001b[1mContact\u001b[0m\n     \u001b[33mâš ï¸ \u001b[0m URL non absolue: '#' â†’ risque dâ€™Ãªtre traitÃ©e comme relative\n\n\u001b[1mHEADER/STRUCT â€” PARAMS MANIFEST (BRUTS)\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n{\n  \"contact\": {\n    \"address_text\": \"\",\n    \"address_url\": \"\",\n    \"email\": \"\",\n    \"phone_display\": \"\",\n    \"phone_tel\": \"\"\n  },\n  \"topbar\": {\n    \"cta\": null,\n    \"enabled\": false,\n    \"text_html\": \"\"\n  }\n}\n{\n  \"contact\": {\n    \"address_text\": \"\",\n    \"address_url\": \"\",\n    \"email\": \"\",\n    \"phone_display\": \"\",\n    \"phone_tel\": \"\"\n  },\n  \"socials\": [],\n  \"topbar\": {\n    \"cta\": null,\n    \"enabled\": false,\n    \"text_html\": \"\"\n  }\n}\n\n\u001b[1mROUTES CRITIQUES â€” AUTH & HOME\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\n\u001b[32mâœ…\u001b[0m home: reverse('pages:home') â†’ /\n\u001b[32mâœ…\u001b[0m login: reverse('login') â†’ /login/\n\u001b[32mâœ…\u001b[0m register: reverse('register') â†’ /register/\n\u001b[32mâœ…\u001b[0m logout: reverse('logout') â†’ /logout/\n\u001b[32mâœ…\u001b[0m profile: reverse('profile') â†’ /profile/\n\u001b[31mâŒ\u001b[0m onlinelearning-home: reverse('onlinelearning-home') â†’ NoReverseMatch: Reverse for 'onlinelearning-home' not found. 'onlinelearning-home' is not a valid view function or pattern name.\n\n\u001b[1mSYNTHÃˆSE\u001b[0m\n\u001b[90mâ”€â”€â”€â”€â”€â”€â”€â”€\u001b[0m\nğŸ§­ Lis les blocs â€˜\u001b[1mMenu (manifest brut)\u001b[0mâ€™ puis â€˜\u001b[1mMenu (aprÃ¨s hydration)\u001b[0mâ€™.\n   \u001b[36mâ„¹ï¸ \u001b[0m Si un item a \u001b[31mâŒ\u001b[0m reverse(...), corrige le \u001b[1murl_name\u001b[0m dans le manifest,\n           ou assure-toi que la route existe (cf. suggestions).\n   \u001b[36mâ„¹ï¸ \u001b[0m Si un item nâ€™a ni url ni url_name â†’ le template tombera sur â€˜#â€™.\n   \u001b[36mâ„¹ï¸ \u001b[0m Pour auth links, vÃ©rifie que â€˜loginâ€™/â€˜registerâ€™ sont exposÃ©s.\n\n\u001b[32mâœ…\u001b[0m Trace terminÃ©e.\nRESULT:OK in 0.137s\nTerminÃ©: 10/12 OK en 0.4s",
    "app": "atelier",
    "suite_runner": "apps.atelier.scripts.suite.run_all"
  },
  {
    "module_test": "apps.billing.scripts.suite.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.010s reason=exception",
    "stack": "â†’ Running test_billing_access_grant\n== billing_access_grant: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/scripts/suite/tests_scripts/test_billing_access_grant.py\", line 19, in run\n    order, _ = PaymentService.create_or_update_order_and_intent(user=u, email=u.email, course=course, currency='EUR')\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/contextlib.py\", line 79, in inner\n    return func(*args, **kwds)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 65, in create_or_update_order_and_intent\n    amount_subtotal = PriceService.course_amount_cents(course, currency)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 56, in course_amount_cents\n    return PriceService.resolve_course_price_cents(course, currency, country)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 52, in resolve_course_price_cents\n    raise ValueError(f\"Aucun prix actif pour course={course.id} currency={currency} country={country}\")\nValueError: Aucun prix actif pour course=8 currency=EUR country=None\nRESULT:KO in 1.351s reason=exception\nâ†’ Running test_billing_currency\n== billing_currency: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/scripts/suite/tests_scripts/test_billing_currency.py\", line 14, in run\n    order, payload = PaymentService.create_or_update_order_and_intent(user=u, email=u.email, course=c, currency=cur)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/contextlib.py\", line 79, in inner\n    return func(*args, **kwds)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 65, in create_or_update_order_and_intent\n    amount_subtotal = PriceService.course_amount_cents(course, currency)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 56, in course_amount_cents\n    return PriceService.resolve_course_price_cents(course, currency, country)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 52, in resolve_course_price_cents\n    raise ValueError(f\"Aucun prix actif pour course={course.id} currency={currency} country={country}\")\nValueError: Aucun prix actif pour course=8 currency=EUR country=None\nRESULT:KO in 0.009s reason=exception\nâ†’ Running test_billing_dryrun\n== billing_dryrun: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/scripts/suite/tests_scripts/test_billing_dryrun.py\", line 16, in run\n    order, payload = PaymentService.create_or_update_order_and_intent(user=user, email=user.email, course=course, currency='EUR')\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/contextlib.py\", line 79, in inner\n    return func(*args, **kwds)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 65, in create_or_update_order_and_intent\n    amount_subtotal = PriceService.course_amount_cents(course, currency)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 56, in course_amount_cents\n    return PriceService.resolve_course_price_cents(course, currency, country)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 52, in resolve_course_price_cents\n    raise ValueError(f\"Aucun prix actif pour course={course.id} currency={currency} country={country}\")\nValueError: Aucun prix actif pour course=8 currency=EUR country=None\nRESULT:KO in 0.010s reason=exception\nâ†’ Running test_billing_idempotency\n== billing_idempotency: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/scripts/suite/tests_scripts/test_billing_idempotency.py\", line 15, in run\n    order, _ = PaymentService.create_or_update_order_and_intent(user=u, email=u.email, course=c, currency='EUR')\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/contextlib.py\", line 79, in inner\n    return func(*args, **kwds)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 65, in create_or_update_order_and_intent\n    amount_subtotal = PriceService.course_amount_cents(course, currency)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 56, in course_amount_cents\n    return PriceService.resolve_course_price_cents(course, currency, country)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 52, in resolve_course_price_cents\n    raise ValueError(f\"Aucun prix actif pour course={course.id} currency={currency} country={country}\")\nValueError: Aucun prix actif pour course=8 currency=EUR country=None\nRESULT:KO in 0.010s reason=exception\nâ†’ Running test_billing_refund\n== billing_refund: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/scripts/suite/tests_scripts/test_billing_refund.py\", line 15, in run\n    order, _ = PaymentService.create_or_update_order_and_intent(user=u, email=u.email, course=c, currency='EUR')\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/contextlib.py\", line 79, in inner\n    return func(*args, **kwds)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 65, in create_or_update_order_and_intent\n    amount_subtotal = PriceService.course_amount_cents(course, currency)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 56, in course_amount_cents\n    return PriceService.resolve_course_price_cents(course, currency, country)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/billing/services.py\", line 52, in resolve_course_price_cents\n    raise ValueError(f\"Aucun prix actif pour course={course.id} currency={currency} country={country}\")\nValueError: Aucun prix actif pour course=8 currency=EUR country=None\nRESULT:KO in 0.010s reason=exception\nTerminÃ©: 0/5 OK en 1.42s",
    "app": "billing",
    "suite_runner": "apps.billing.scripts.suite.run_all"
  },
  {
    "module_test": "apps.catalog.scripts.suite.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.017s reason=exception",
    "stack": "â†’ Running test_catalog_cache_invalidate\n== catalog_cache_invalidate: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 105, in _execute\n    return self.cursor.execute(sql, params)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py\", line 360, in execute\n    return super().execute(query, params)\nsqlite3.IntegrityError: UNIQUE constraint failed: content_lecture.section_id, content_lecture.order\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/catalog/scripts/suite/tests_scripts/test_catalog_cache_invalidate.py\", line 17, in run\n    Lecture.objects.create(course=course, section=sec, title='Nouvelle leÃ§on (test)', order=999, is_published=True)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/manager.py\", line 87, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/query.py\", line 663, in create\n    obj.save(force_insert=True, using=self.db)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/base.py\", line 902, in save\n    self.save_base(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/base.py\", line 1008, in save_base\n    updated = self._save_table(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/base.py\", line 1169, in _save_table\n    results = self._do_insert(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/base.py\", line 1210, in _do_insert\n    return manager._insert(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/manager.py\", line 87, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/query.py\", line 1868, in _insert\n    return query.get_compiler(using=using).execute_sql(returning_fields)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/sql/compiler.py\", line 1882, in execute_sql\n    cursor.execute(sql, params)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 122, in execute\n    return super().execute(sql, params)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 79, in execute\n    return self._execute_with_wrappers(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 92, in _execute_with_wrappers\n    return executor(sql, params, many, context)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 100, in _execute\n    with self.db.wrap_database_errors:\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/utils.py\", line 91, in __exit__\n    raise dj_exc_value.with_traceback(traceback) from exc_value\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/utils.py\", line 105, in _execute\n    return self.cursor.execute(sql, params)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py\", line 360, in execute\n    return super().execute(query, params)\ndjango.db.utils.IntegrityError: UNIQUE constraint failed: content_lecture.section_id, content_lecture.order\nRESULT:KO in 0.078s reason=exception\nâ†’ Running test_catalog_ordering\n== catalog_ordering: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/catalog/scripts/suite/tests_scripts/test_catalog_ordering.py\", line 28, in run\n    assert orders == expected, f\"Trous ou incohÃ©rences dans section {section.id}: {orders} vs {expected}\"\nAssertionError: Trous ou incohÃ©rences dans section 6: [1, 999] vs [1, 2]\nRESULT:KO in 0.012s reason=exception\nâ†’ Running test_catalog_query_cost\n== catalog_query_cost: start ==\nListe: 2 requÃªtes\nDÃ©tail: 4 requÃªtes\n== catalog_query_cost: OK âœ… ==\nRESULT:OK in 0.032s\nâ†’ Running test_catalog_sitemaps\n== catalog_sitemaps: start ==\n== catalog_sitemaps: OK âœ… ==\nRESULT:OK in 0.016s\nâ†’ Running test_catalog_visibility\n== catalog_visibility: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/catalog/scripts/suite/tests_scripts/test_catalog_visibility.py\", line 14, in run\n    draft = Course.objects.create(title='Brouillon', slug='cours-brouillon', description='-', is_published=False)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/manager.py\", line 87, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/query.py\", line 663, in create\n    obj.save(force_insert=True, using=self.db)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/catalog/models.py\", line 77, in save\n    self.full_clean()\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/db/models/base.py\", line 1679, in full_clean\n    raise ValidationError(errors)\ndjango.core.exceptions.ValidationError: {'slug': ['Un objet Course avec ce champ Slug existe dÃ©jÃ .']}\nRESULT:KO in 0.017s reason=exception\nTerminÃ©: 2/5 OK en 0.18s",
    "app": "catalog",
    "suite_runner": "apps.catalog.scripts.suite.run_all"
  },
  {
    "module_test": "apps.content.scripts.gating.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.135s reason=exception",
    "stack": "â†’ Running test_gating_authenticated\n== gating_authenticated: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/content/scripts/gating/tests_scripts/test_gating_authenticated.py\", line 35, in run\n    assert r.status_code == 200, f\"Enrolled user should access premium, got {r.status_code}\"\nAssertionError: Enrolled user should access premium, got 302\nRESULT:KO in 1.346s reason=exception\nâ†’ Running test_gating_no_leak\n== gating_no_leak: start ==\n== gating_no_leak: OK âœ… ==\nRESULT:OK in 0.010s\nâ†’ Running test_gating_perf_guard\n== gating_perf_guard: start ==\n== gating_perf_guard: OK âœ… ==\nRESULT:OK in 0.009s\nâ†’ Running test_gating_policy\n== gating_policy: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/content/scripts/gating/tests_scripts/test_gating_policy.py\", line 37, in run\n    r = c.get(lecture_url(1, 1))\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/test/client.py\", line 1124, in get\n    response = super().get(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/test/client.py\", line 475, in get\n    return self.generic(\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/test/client.py\", line 671, in generic\n    return self.request(**r)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/test/client.py\", line 1087, in request\n    self.check_exception(response)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/test/client.py\", line 802, in check_exception\n    raise exc_value\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/core/handlers/exception.py\", line 55, in inner\n    response = get_response(request)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/core/handlers/base.py\", line 197, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/views/generic/base.py\", line 105, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/content/mixins.py\", line 53, in dispatch\n    return super().dispatch(request, *args, **kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/views/generic/base.py\", line 144, in dispatch\n    return handler(request, *args, **kwargs)\n  File \"/Users/elazhar/miniforge3_x86_64/envs/lumiereactivity/lib/python3.10/site-packages/django/views/generic/base.py\", line 228, in get\n    context = self.get_context_data(**kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/content/views.py\", line 48, in get_context_data\n    self.seo_jsonld = [seo_schema.article_schema(lecture, self.request)]\nAttributeError: module 'apps.marketing.schema' has no attribute 'article_schema'\nRESULT:KO in 0.135s reason=exception\nTerminÃ©: 2/4 OK en 1.52s",
    "app": "content",
    "suite_runner": "apps.content.scripts.gating.run_all"
  },
  {
    "module_test": "apps.learning.scripts.suite.run_all",
    "nom_test": "run_all",
    "message_erreur": "RESULT:KO in 0.010s reason=exception",
    "stack": "â†’ Running test_learning_comments\n== learning_comments: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_comments.py\", line 21, in run\n    assert lec, \"Aucune lecture publiÃ©e\"\nAssertionError: Aucune lecture publiÃ©e\nRESULT:KO in 0.010s reason=exception\nâ†’ Running test_learning_link_video\nusage: run_all_discover.py --pk PK [--path PATH] [--pattern PATTERN] [--auto]\n                           [--force]\nrun_all_discover.py: error: the following arguments are required: --pk\n== learning_link_video: bad args ==\nusage: run_all_discover.py --pk PK [--path PATH] [--pattern PATTERN] [--auto]\n                           [--force]\n\noptions:\n  --pk PK\n  --path PATH\n  --pattern PATTERN\n  --auto\n  --force\nRESULT:OK in 0.001s\nâ†’ Running test_learning_progress_smoke\n== learning_progress_smoke: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_progress_smoke.py\", line 32, in run\n    assert lec, \"Aucune lecture publiÃ©e\"\nAssertionError: Aucune lecture publiÃ©e\nRESULT:KO in 0.011s reason=exception\nâ†’ Running test_learning_stream_diagnose\n== learning_stream_diagnose: start ==\n[args] pk=None login_superuser=True range='bytes=0-1023'\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_stream_diagnose.py\", line 130, in run\n    lecture = _pick_lecture(args.pk)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_stream_diagnose.py\", line 55, in _pick_lecture\n    assert lec, \"Aucune lecture publiÃ©e trouvÃ©e. Seed le catalogue.\"\nAssertionError: Aucune lecture publiÃ©e trouvÃ©e. Seed le catalogue.\nRESULT:KO in 0.011s reason=exception\nâ†’ Running test_learning_stream_seek\n== learning_stream_seek: start ==\nTraceback (most recent call last):\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/common/runscript_harness.py\", line 25, in _wrapped\n    res = fn(*args, **kwargs)\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_stream_seek.py\", line 66, in run\n    lec = _pick_streamable_lecture()\n  File \"/Users/elazhar/PycharmProjects/lumierelearning/apps/learning/scripts/suite/tests_scripts/test_learning_stream_seek.py\", line 48, in _pick_streamable_lecture\n    assert lec, \"Aucune leÃ§on publiÃ©e â€” seed ton catalogue.\"\nAssertionError: Aucune leÃ§on publiÃ©e â€” seed ton catalogue.\nRESULT:KO in 0.010s reason=exception\nTerminÃ©: 1/5 OK en 0.08s",
    "app": "learning",
    "suite_runner": "apps.learning.scripts.suite.run_all"
  }
]