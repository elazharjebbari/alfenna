{% extends "partials/_auth_layout.html" %}
{% load i18n %}

{% block auth_title %}{% trans "Mot de passe oublié" %}{% endblock %}
{% block auth_sub %}{% trans "Saisis ton e‑mail pour recevoir un lien." %}{% endblock %}

{% block auth_form %}
  {% if form.non_field_errors %}
    <div class="alert error" role="alert">{{ form.non_field_errors|join:" " }}</div>
  {% endif %}

  <form class="auth-form" method="post" action="{% url 'accounts:password_reset' %}" novalidate>
    {% csrf_token %}

    <div class="field">
      <label for="id_email">{% trans "Adresse e‑mail" %}</label>
      {% with field_errors=form.email.errors %}
        <input id="id_email"
               name="email"
               type="email"
               autocomplete="email"
               required
               aria-invalid="{{ field_errors|yesno:'true,false' }}"
               {% if field_errors %}aria-describedby="err_id_email"{% endif %}
               value="{{ form.email.value|default_if_none:'' }}">
        {% if field_errors %}
          <div class="alert error field-error" id="err_id_email">{{ field_errors|join:" " }}</div>
        {% endif %}
      {% endwith %}
    </div>

    <div class="auth-actions">
      <button class="btn-primary" type="submit">{% trans "Envoyer le lien" %}</button>
    </div>

    <div class="meta-links">
      <a href="{% url 'pages:login' %}">{% trans "Retour" %}</a>
    </div>
  </form>
{% endblock %}
